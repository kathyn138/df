<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

<link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.7.1.min.js"
    integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/2662a5b995.js" crossorigin="anonymous"></script>
  <script type="text/javascript" src="//assets.mediadelivery.net/playerjs/player-0.1.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>

<script>
  $(document).ready(function () {
	// newsletter submission logic
    // prevent refresh + add ty message
  $('#newsletter-form').submit(function (e) {
    e.preventDefault();
    let form = e.target;
    let http = new XMLHttpRequest();
    http.open('POST', form.action);
    http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    http.onreadystatechange = function () {
      if (http.readyState === 4 && http.status === 200) {
        form.reset();
        let emailInput = form.querySelector('#input-newsletter-email');
        let label = form.querySelector('.newsletter-form-label');
        let signUpBtn = form.querySelector('.newsletter-signup-btn');

        emailInput.style.display = 'none';
        signUpBtn.style.display = 'none';
        label.style.display = 'none';

        let thankYouMessage = form.querySelector('.newsletter-submission-msg');

        thankYouMessage.style.display = 'block';
      }
    };
    let params =
      'email=' + document.getElementById('input-newsletter-email').value;
    http.send(params);
  });
    
   // create form submission logic 
   $('#create-form').submit(function (e) {
    e.preventDefault();
    let form = e.target;
    let http = new XMLHttpRequest();
    http.open('POST', form.action);
    http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    http.onreadystatechange = function () {
      if (http.readyState === 4 && http.status === 200) {
        form.reset();
        let nameInput = form.querySelector('#create-name-input');
        let contactInput = form.querySelector('#create-contact-input');
        let msgInput = form.querySelector('#create-msg-input');
        let submitBtn = form.querySelector('.create-submit-btn');

        nameInput.style.visibility = 'hidden';
        contactInput.style.visibility = 'hidden';
        msgInput.style.visibility = 'hidden';
        submitBtn.style.visibility = 'hidden';

        let thankYouMessage = form.querySelector('.create-submission-msg');

        thankYouMessage.style.visibility = 'visible';
      }
    };
    let params =
      'name=' +
      document.getElementById('create-name-input').value +
      '&contact-info=' +
      document.getElementById('create-contact-input').value +
      '&message=' +
      document.getElementById('create-msg-input').value;

    http.send(params);
  });

  // NAVBAR ANIMATIONS
  function navBarCollapse() {
    $('#navbar-close').css({ display: 'none' });
    $('#navbar-open').css({ display: 'inline' });

    $('.navbar-default').wrap('<div class="collapse navbar-collapse"></div>');
    $('.navbar-mobile').wrap(
      '<div class="collapse navbar-collapse" id="navbarSupportedContent"></div>'
    );

    $('#navbar-open').on('click touch', function () {
      $('.navbar-mobile').css({ display: 'block' });
      $('#navbar-open').css({ display: 'none' });
      $('#navbar-close').css({ display: 'inline' });
      
      // prevent seeing rest of page on y direction when mobile menu open 
      $('body').css({ 'overflow-y': 'hidden' });
    });

    $('#navbar-close').on('click touch', function () {
      $('#navbar-close').css({ display: 'none' });
      $('#navbar-open').css({ display: 'inline' });
      $('body').css({ 'overflow-y': 'auto' });
    });
  }
  
  $(window).resize(function () {
    $('.navbar-mobile').css({ display: 'none' });
    // handle cases where user goes from mobile to desktop without closing navbar-mobile
	$('body').css({ 'overflow-y': 'visible'});

    // if uncollapsed parent navbar is there then remove
    // otherwise will be present after going from
    // collapsed viewport to non collapsed viewport
    if ($('#navbarSupportedContent').length) {
      $('.navbar-nav').unwrap();
    }
    
    // if not mobile view, use desktop version of video
    if (
      $('#promo-video').attr('src') !==
      'https://iframe.mediadelivery.net/embed/261546/5e2e3857-2aff-4f4e-8689-8ad384b028de?autoplay=true&loop=false&muted=true&preload=true&responsive=true'
    ) {
      $('#promo-video').attr(
        'src',
        'https://iframe.mediadelivery.net/embed/261546/dc276456-7fe6-403a-b903-d9044f5355e3?autoplay=true&loop=false&muted=true&preload=true&responsive=true'
      );
    }

    // mobile devices with previous resizing
    if (window.matchMedia('(max-width: 576px)').matches) {
      // switch video player for mobile device
    // allows volume button to appear
    $('#promo-video').attr(
      'src',
      'https://iframe.mediadelivery.net/embed/263606/5e2e3857-2aff-4f4e-8689-8ad384b028de?autoplay=true&loop=false&muted=true&preload=true&responsive=true'
    );
      
      $('.social-icons')
        .removeClass('justify-content-end ')
        .addClass('justify-content-center');

      navBarCollapse();

      $('.navbar-brand').html('DEL FICO');
    } else {
      $('.navbar-brand').html('DF');
    }
  });

  // mobile devices without previous resizing
  if (window.matchMedia('(max-width: 576px)').matches) {
    // switch video player for mobile device
    // allows volume button to appear
    $('#promo-video').attr(
      'src',
      'https://iframe.mediadelivery.net/embed/263606/5e2e3857-2aff-4f4e-8689-8ad384b028de?autoplay=true&loop=false&muted=true&preload=true&responsive=true'
    );
    
    $('.social-icons')
      .removeClass('justify-content-end mt-3')
      .addClass('justify-content-center');

    navBarCollapse();

    $('.navbar-brand').html('DEL FICO');
  } else {
    $('.navbar-brand').html('DF');
  }
});

    const player = new playerjs.Player(document.getElementById('promo'));

  // always keep video on mute on landing page initially to keep autoplay
  // default is that player will remember unmute state ie blocks autoplay if left unmuted
  player.on('ready', () => {
    player.mute();
  });
</script>